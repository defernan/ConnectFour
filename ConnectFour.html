<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="ConnectFour.css">
    <title>Connect Four</title>
    
</head>
    
<body>
    <canvas id="board" width="700" height="600"></canvas>
    <script>
        const boardWidth=7;
        const boardHeight=6;
        const empty=0;
        const black=1;
        const red=2;
        var piece=0;
        var P1turn=true;
        var context={};
        var ctx={};
        var board= [];
        
        init();
        
        context.addEventListener("click", makeMove, false);
        
        function init(){
            context=document.getElementById("board");
            ctx=context.getContext("2d");
            for(var i=0; i < boardWidth; i++){
                board.push( [] );   
            }
            for(var i=0; i < boardWidth; i++){
                for(var j=0; j < boardHeight; j++){
                    board[i].push(empty);
                }
            }
            drawBoard();
        }
        function initializeBoard(){
            for(var i=0; i < boardWidth; i++){
                for(var j=0; j < boardHeight; j++){
                    board[i][j]=empty;
                }
            }
        }
        function makeMove(event){
            var x= 0;
			var y= 0;
			if (event.x != undefined && event.y != undefined){
				x = event.x;
				y = event.y;
			}else {// Firefox method to get the position
				x = event.clientX + document.body.scrollLeft +
				  document.documentElement.scrollLeft;
				y = event.clientY + document.body.scrollTop +
				  document.documentElement.scrollTop;
			}
            x -= context.offsetLeft;
            y -= context.offsetTop;
            x= Math.floor(x/100);
            y=context.height-y;
            y= Math.floor(y/100);
            placePiece(x);
            //alert( x +", " + y);
            
        }
        function drawBoard(){
            var cellSize = context.height / boardHeight;
            for (var i=0; i < boardWidth; i++){
                for (var j=0; j < boardHeight; j++) {
                    ctx.rect(i*cellSize, j*cellSize, cellSize, cellSize);
                    ctx.stroke();
                }
            }
        }
        function placePiece(x){
            whosTurn();
            for(var i=0; i < boardHeight; i++){
                if(board[x][i]==empty){
                    board[x][i]=piece;
                    P1turn=!P1turn;
                    break;
                }
                if(i==boardHeight-1){
                    alert("Column is full, select another");
                }
            }
            
        }
        function whosTurn(){
            if(P1turn){
                piece=black;
            }else{
                piece=red;
            }
        }
        function checkForWinner(){
            
        }
    
    
    </script>
</body>
    
</html>